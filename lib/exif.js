

/**
 * Create By @254gerboo
 * Contact - https://wa.me/254710537788
 * Follow https://github.com/254gerboo
 */

 
 

const _0x15876e=_0x3968;(function(_0x414a6b,_0x5a1323){const _0xa556d3=_0x3968,_0x1190f6=_0x414a6b();while(!![]){try{const _0x47fea1=-parseInt(_0xa556d3(0x93))/0x1*(-parseInt(_0xa556d3(0xba))/0x2)+-parseInt(_0xa556d3(0xb1))/0x3+parseInt(_0xa556d3(0x99))/0x4*(-parseInt(_0xa556d3(0x92))/0x5)+-parseInt(_0xa556d3(0xa4))/0x6+parseInt(_0xa556d3(0x95))/0x7*(-parseInt(_0xa556d3(0x9b))/0x8)+-parseInt(_0xa556d3(0x9f))/0x9+parseInt(_0xa556d3(0x9e))/0xa;if(_0x47fea1===_0x5a1323)break;else _0x1190f6['push'](_0x1190f6['shift']());}catch(_0x125be8){_0x1190f6['push'](_0x1190f6['shift']());}}}(_0x3100,0xb5864));function _0x3968(_0x5d4829,_0x8d4e45){const _0x31008c=_0x3100();return _0x3968=function(_0x39687d,_0x1c3dfd){_0x39687d=_0x39687d-0x8b;let _0x4e2f54=_0x31008c[_0x39687d];return _0x4e2f54;},_0x3968(_0x5d4829,_0x8d4e45);}const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x15876e(0xa8)),ff=require(_0x15876e(0xa2)),webp=require(_0x15876e(0xa5)),path=require(_0x15876e(0xaf));async function imageToWebp(_0x697b11){const _0x1f5e40=_0x15876e,_0x5d18ee=path[_0x1f5e40(0xb4)](tmpdir(),Crypto[_0x1f5e40(0x9a)](0x6)[_0x1f5e40(0x91)](0x0,0x6)['toString'](0x24)+'.webp'),_0x4bfa35=path[_0x1f5e40(0xb4)](tmpdir(),Crypto[_0x1f5e40(0x9a)](0x6)[_0x1f5e40(0x91)](0x0,0x6)['toString'](0x24)+_0x1f5e40(0xbe));fs['writeFileSync'](_0x4bfa35,_0x697b11),await new Promise((_0x3c0a24,_0x190aea)=>{const _0xa95569=_0x1f5e40;ff(_0x4bfa35)['on'](_0xa95569(0xbd),_0x190aea)['on'](_0xa95569(0xa7),()=>_0x3c0a24(!![]))['addOutputOptions']([_0xa95569(0xab),_0xa95569(0x8e),_0xa95569(0x90),_0xa95569(0xb3)])[_0xa95569(0xa1)](_0xa95569(0xb2))[_0xa95569(0xbc)](_0x5d18ee);});const _0x841c89=fs[_0x1f5e40(0xb0)](_0x5d18ee);return fs[_0x1f5e40(0xbf)](_0x5d18ee),fs['unlinkSync'](_0x4bfa35),_0x841c89;}async function videoToWebp(_0x3a256f){const _0x2ef0b5=_0x15876e,_0x92b784=path['join'](tmpdir(),Crypto[_0x2ef0b5(0x9a)](0x6)['readUIntLE'](0x0,0x6)[_0x2ef0b5(0x8d)](0x24)+_0x2ef0b5(0x94)),_0x294660=path[_0x2ef0b5(0xb4)](tmpdir(),Crypto['randomBytes'](0x6)[_0x2ef0b5(0x91)](0x0,0x6)[_0x2ef0b5(0x8d)](0x24)+'.mp4');fs[_0x2ef0b5(0xad)](_0x294660,_0x3a256f),await new Promise((_0x105bce,_0x15773e)=>{const _0x4ac9ef=_0x2ef0b5;ff(_0x294660)['on'](_0x4ac9ef(0xbd),_0x15773e)['on'](_0x4ac9ef(0xa7),()=>_0x105bce(!![]))['addOutputOptions']([_0x4ac9ef(0xab),_0x4ac9ef(0x8e),_0x4ac9ef(0x90),_0x4ac9ef(0xb3),_0x4ac9ef(0xb6),'0','-ss',_0x4ac9ef(0x97),'-t',_0x4ac9ef(0xb9),_0x4ac9ef(0xa0),_0x4ac9ef(0x8b),_0x4ac9ef(0xb5),_0x4ac9ef(0xb8),'0'])[_0x4ac9ef(0xa1)](_0x4ac9ef(0xb2))['save'](_0x92b784);});const _0x228b6a=fs[_0x2ef0b5(0xb0)](_0x92b784);return fs['unlinkSync'](_0x92b784),fs[_0x2ef0b5(0xbf)](_0x294660),_0x228b6a;}function _0x3100(){const _0x2dcf70=['length','-vsync','00:00:05','626374mUIdpC','categories','save','error','.jpg','unlinkSync','default','stringify','toString','libwebp','concat','-vf','readUIntLE','7408750cJTmMd','3wVAPkS','.webp','652673AZVhRS','exif','00:00:00','tribal-chief ','4slzUXk','randomBytes','112HOtehk','writeUIntLE','Image','43934740xUhIvC','520704JIbgfh','-preset','toFormat','fluent-ffmpeg','packname','6503568KjJzeC','node-webpmux','tribal-chief-Md','end','crypto','author','utf-8','-vcodec','load','writeFileSync','from','path','readFileSync','1981893zPHlDl','webp','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','join','-an','-loop'];_0x3100=function(){return _0x2dcf70;};return _0x3100();}async function writeExifImg(_0x4807dc,_0x3b11b1){const _0xc62f6=_0x15876e;let _0x149ab6=await imageToWebp(_0x4807dc);const _0x461294=path[_0xc62f6(0xb4)](tmpdir(),Crypto[_0xc62f6(0x9a)](0x6)[_0xc62f6(0x91)](0x0,0x6)['toString'](0x24)+_0xc62f6(0x94)),_0x4af18b=path[_0xc62f6(0xb4)](tmpdir(),Crypto[_0xc62f6(0x9a)](0x6)[_0xc62f6(0x91)](0x0,0x6)[_0xc62f6(0x8d)](0x24)+_0xc62f6(0x94));fs[_0xc62f6(0xad)](_0x461294,_0x149ab6);if(_0x3b11b1[_0xc62f6(0xa3)]||_0x3b11b1['author']){const _0x574d1b=new webp[(_0xc62f6(0x9d))](),_0x40f6b5={'sticker-pack-id':_0xc62f6(0xa6),'sticker-pack-name':_0x3b11b1['packname'],'sticker-pack-publisher':_0x3b11b1[_0xc62f6(0xa9)],'emojis':_0x3b11b1[_0xc62f6(0xbb)]?_0x3b11b1['categories']:['']},_0x50e83c=Buffer[_0xc62f6(0xae)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x31542b=Buffer[_0xc62f6(0xae)](JSON[_0xc62f6(0x8c)](_0x40f6b5),'utf-8'),_0x35e20b=Buffer[_0xc62f6(0x8f)]([_0x50e83c,_0x31542b]);return _0x35e20b[_0xc62f6(0x9c)](_0x31542b[_0xc62f6(0xb7)],0xe,0x4),await _0x574d1b['load'](_0x461294),fs[_0xc62f6(0xbf)](_0x461294),_0x574d1b[_0xc62f6(0x96)]=_0x35e20b,await _0x574d1b['save'](_0x4af18b),_0x4af18b;}}async function writeExifVid(_0x1c032a,_0x2bc9c1){const _0x252c7a=_0x15876e;let _0x10708c=await videoToWebp(_0x1c032a);const _0x2eae56=path['join'](tmpdir(),Crypto[_0x252c7a(0x9a)](0x6)['readUIntLE'](0x0,0x6)[_0x252c7a(0x8d)](0x24)+_0x252c7a(0x94)),_0x1fee5d=path[_0x252c7a(0xb4)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+'.webp');fs[_0x252c7a(0xad)](_0x2eae56,_0x10708c);let _0x2b2d9f,_0x328881;try{_0x2b2d9f=_0x2bc9c1[_0x252c7a(0xa3)];}catch(_0x31ac21){_0x2b2d9f='tribal-chief-Md';}try{_0x328881=_0x2bc9c1[_0x252c7a(0xa9)];}catch(_0x44cb0d){_0x328881='';}const _0x100f09=new webp[(_0x252c7a(0x9d))](),_0x59077d={'sticker-pack-id':'tribal-chief-Md','sticker-pack-name':_0x2b2d9f,'sticker-pack-publisher':_0x328881,'emojis':_0x2bc9c1[_0x252c7a(0xbb)]?_0x2bc9c1['categories']:['']},_0x2bb358=Buffer[_0x252c7a(0xae)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x48042d=Buffer[_0x252c7a(0xae)](JSON['stringify'](_0x59077d),_0x252c7a(0xaa)),_0x43021d=Buffer[_0x252c7a(0x8f)]([_0x2bb358,_0x48042d]);return _0x43021d['writeUIntLE'](_0x48042d[_0x252c7a(0xb7)],0xe,0x4),await _0x100f09[_0x252c7a(0xac)](_0x2eae56),fs[_0x252c7a(0xbf)](_0x2eae56),_0x100f09[_0x252c7a(0x96)]=_0x43021d,await _0x100f09[_0x252c7a(0xbc)](_0x1fee5d),_0x1fee5d;}async function writeExifWebp(_0x1fa62d,_0xcc3899){const _0x4e2dbb=_0x15876e,_0x2b706d=path[_0x4e2dbb(0xb4)](tmpdir(),Crypto[_0x4e2dbb(0x9a)](0x6)[_0x4e2dbb(0x91)](0x0,0x6)[_0x4e2dbb(0x8d)](0x24)+_0x4e2dbb(0x94)),_0x29fd7c=path[_0x4e2dbb(0xb4)](tmpdir(),Crypto[_0x4e2dbb(0x9a)](0x6)['readUIntLE'](0x0,0x6)[_0x4e2dbb(0x8d)](0x24)+'.webp');fs['writeFileSync'](_0x2b706d,_0x1fa62d);if(_0xcc3899[_0x4e2dbb(0xa3)]||_0xcc3899[_0x4e2dbb(0xa9)]){const _0x64e54c=new webp[(_0x4e2dbb(0x9d))](),_0x26244d={'sticker-pack-id':_0x4e2dbb(0x98),'sticker-pack-name':_0xcc3899['packname'],'sticker-pack-publisher':_0xcc3899['author'],'emojis':_0xcc3899['categories']?_0xcc3899[_0x4e2dbb(0xbb)]:['']},_0x4cb9d8=await Buffer[_0x4e2dbb(0xae)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3071d7=await Buffer[_0x4e2dbb(0xae)](JSON[_0x4e2dbb(0x8c)](_0x26244d),'utf-8'),_0x90789=await Buffer[_0x4e2dbb(0x8f)]([_0x4cb9d8,_0x3071d7]);return await _0x90789[_0x4e2dbb(0x9c)](_0x3071d7[_0x4e2dbb(0xb7)],0xe,0x4),await _0x64e54c[_0x4e2dbb(0xac)](_0x2b706d),fs[_0x4e2dbb(0xbf)](_0x2b706d),_0x64e54c['exif']=_0x90789,await _0x64e54c[_0x4e2dbb(0xbc)](_0x29fd7c),_0x29fd7c;}}

module.exports = {
  imageToWebp,
  videoToWebp,
  writeExifImg,
  writeExifVid,
  writeExifWebp,
};  
